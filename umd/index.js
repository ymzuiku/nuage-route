!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).vanillaRoute=n()}(this,function(){"use strict";function e(t,o){var r,i,a,e,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function n(n){return function(e){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,i&&(a=2&n[0]?i.return:n[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=o.call(t,u)}catch(e){n=[6,e],i=0}finally{r=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,e])}}}var n=document.createElement("div");n.style.cssText="width:100%; height:100%";var o={};window.st=o;var a={target:n,loading:function(){return"loading..."},errorPath:"/",nowRenderPath:"",routerMap:{},beforeRender:void 0,use:function(n,e,t){a.routerMap[n]=e,void 0!==t&&setTimeout(function(){e.__promising||e().then(function(e){a.routerMap[n]=e})},t)},saveScrollTop:function(e){o[window.location.href]=e?e.scrollTop:window.scrollY},replaceScrollTop:function(t){return new Promise(function(n){requestAnimationFrame(function(){var e=o[window.location.href];e&&(t?(t.scrollTo(0,e),window.scrollElement=void 0):window.scrollTo({top:e})),n(e||0)})})},getLastScrollTop:function(){return o[window.location.href]||0},push:function(e){window.history.pushState(null,"","#"+e),a.render()},pop:function(){window.history.back(),a.render(),o[window.location.href]=void 0},replace:function(e){window.history.replaceState(null,"","#"+e),a.render()},getPath:function(){return(window.location.hash.split("#")[1]||"/").split("?")[0]},render:function(){return function(i,a,u,l){return new(u=u||Promise)(function(e,n){function t(e){try{r(l.next(e))}catch(e){n(e)}}function o(e){try{r(l.throw(e))}catch(e){n(e)}}function r(n){n.done?e(n.value):new u(function(e){e(n.value)}).then(t,o)}r((l=l.apply(i,a||[])).next())})}(void 0,void 0,void 0,function(){var n,t,o,r,i;return e(this,function(e){switch(e.label){case 0:if(n=a.getPath(),a.nowRenderPath===n)return[2];if("function"==typeof a.beforeRender){if(!1===(t=a.beforeRender(n)))return[2];"string"==typeof t&&(n=t)}return a.routerMap[n]?(o=a.routerMap[n],a.nowRenderPath=n,r=setTimeout(function(){a.target.append(a.loading())},200),o.__promising=!0,[4,Promise.resolve(o())]):(a.replace(a.errorPath),[2]);case 1:return"function"==typeof(i=e.sent())?(clearTimeout(r),a.target.innerText="",a.target.appendChild(i())):(clearTimeout(r),a.target.innerText="",a.target.appendChild(i)),[2]}})})}};return window.addEventListener("popstate",function(){a.render()}),a});
//# sourceMappingURL=index.js.map
