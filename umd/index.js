!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("querystring-number")):"function"==typeof define&&define.amd?define(["querystring-number"],n):(e=e||self).vanillaRoute=n(e.qs)}(this,function(e){"use strict";function a(t,r){var o,i,a,e,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function n(n){return function(e){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(a=2&n[0]?i.return:n[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=r.call(t,u)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,e])}}}e=e&&e.hasOwnProperty("default")?e.default:e;var n=document.createElement("div");n.style.cssText="width:100%; height:100%";var r={};window.st=r;var u={target:n,qs:e,params:function(){var e=location.hash.split("?");return e[1]?u.qs.parse(e[1]):{}},loading:function(){return"loading..."},errorPath:"/",nowRenderPath:"",routerMap:{},beforeRender:void 0,use:function(n,e,t){u.routerMap[n]=e,void 0!==t&&setTimeout(function(){e.__promising||e().then(function(e){u.routerMap[n]=e})},t)},saveScrollTop:function(e){r[window.location.href]=e?e.scrollTop:window.scrollY},replaceScrollTop:function(t){return new Promise(function(n){requestAnimationFrame(function(){var e=r[window.location.href];e&&(t?(t.scrollTo(0,e),window.scrollElement=void 0):window.scrollTo({top:e})),n(e||0)})})},getLastScrollTop:function(){return r[window.location.href]||0},push:function(e){window.history.pushState(null,"","#"+e),u.render()},pop:function(){window.history.back(),u.render(),r[window.location.href]=void 0},replace:function(e){window.history.replaceState(null,"","#"+e),u.render()},getPath:function(){return(window.location.hash.split("#")[1]||"/").split("?")[0]},render:function(){return function(i,a,u,l){return new(u=u||Promise)(function(e,n){function t(e){try{o(l.next(e))}catch(e){n(e)}}function r(e){try{o(l.throw(e))}catch(e){n(e)}}function o(n){n.done?e(n.value):new u(function(e){e(n.value)}).then(t,r)}o((l=l.apply(i,a||[])).next())})}(void 0,void 0,void 0,function(){var n,t,r,o,i;return a(this,function(e){switch(e.label){case 0:if(n=u.getPath(),u.nowRenderPath===n)return[2];if("function"==typeof u.beforeRender){if(!1===(t=u.beforeRender(n)))return[2];"string"==typeof t&&(n=t)}return u.routerMap[n]?(r=u.routerMap[n],u.nowRenderPath=n,o=setTimeout(function(){u.target.append(u.loading())},200),r.__promising=!0,[4,Promise.resolve(r())]):(u.replace(u.errorPath),[2]);case 1:return"function"==typeof(i=e.sent())?(clearTimeout(o),u.target.innerText="",u.target.appendChild(i())):(clearTimeout(o),u.target.innerText="",u.target.appendChild(i)),[2]}})})}};return window.addEventListener("popstate",function(){u.render()}),u});
//# sourceMappingURL=index.js.map
